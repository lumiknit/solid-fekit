"use strict";var e=require("solid-js/web"),t=require("solid-js"),r=require("solid-js/store"),n=e.template("<button>");const o=t=>{const r=()=>{const e={...t};for(const t of["ref","children","class","color","outline","small","disabled"])delete e[t];return e};return o=n(),"function"==typeof(s=t.ref)?e.use(s,o):t.ref=o,e.spread(o,e.mergeProps(r,{get class(){return`no-user-select btn btn-${t.outline?"ol-":""}${t.color||"secondary"} ${t.small?"btn-sm":""} ${t.class??""}`}}),!1,!0),e.insert(o,(()=>t.children)),o;var o,s};var s=e.template('<svg stroke-width=0.15 viewBox="0 0 1 1">// Check shape<path d="\n\t\t\t\t\t\t\tM 0.2 0.5\n\t\t\t\t\t\t\tL 0.45 0.75\n\t\t\t\t\t\t\tL 0.9 0.25\n\t\t\t\t\t\t">'),a=e.template('<label class=checkbox><div class="wh-1 checkbox-box no-user-select cursor-pointer"></div><input type=checkbox name=checkbox>');var c=e.template("<div class=dropdown><div>");e.delegateEvents(["click"]);var l=e.template("<div>");const i=t=>{return r=l(),e.addEventListener(r,"drop",t.onDrop),e.addEventListener(r,"click",t.onClick,!0),e.insert(r,(()=>t.children)),e.effect((()=>e.className(r,`input-group ${t.class??""}`))),r;var r};e.delegateEvents(["click"]);var u=e.template("<input type=text>");const d=t=>{return r=u(),"function"==typeof(n=t.ref)?e.use(n,r):t.ref=r,e.effect((n=>{var o=`form-control ${t.class??""}`,s=t.placeholder;return o!==n.e&&e.className(r,n.e=o),s!==n.t&&e.setAttribute(r,"placeholder",n.t=s),n}),{e:void 0,t:void 0}),r;var r,n};var p=e.template("<input type=file class=d-none>");var h=e.template("<div>");var m=e.template("<span>");var g=Object.freeze({__proto__:null,Button:o,Checkbox:r=>{const[n,o]=t.createSignal(r.value),c=e=>{const t=e.target;console.log(t.checked),o(t.checked),r.onChange?.(t.checked)};return t.createEffect((()=>{const e=t.untrack(n);r.value!==e&&o(r.value)})),(()=>{var o=a(),l=o.firstChild,i=l.nextSibling;e.insert(l,e.createComponent(t.Show,{get when(){return n()},get children(){var t=s();return e.effect((()=>e.setAttribute(t,"class",`stroke-${r.color||"primary"}`))),t}})),i.addEventListener("change",c);var u=r.ref;return"function"==typeof u?e.use(u,i):r.ref=i,e.insert(o,(()=>r.children),null),e.effect((()=>i.checked=r.value)),o})()},DropdownButton:function(r){const[n,s]=t.createSignal(!1),a=()=>{const e={...r};return delete e.label,delete e.children,e};return l=c(),i=l.firstChild,e.insert(l,e.createComponent(o,e.mergeProps(a,{onClick:()=>s((e=>!e)),get children(){return r.label(r.labelProps)}})),i),i.$$click=()=>{s(!1)},e.insert(i,(()=>r.children)),e.effect((()=>e.className(i,"dropdown-menu shadow-2 "+(n()?"visible":"hidden")))),l;var l,i},InputFile:t=>{let r,n;const s=e=>{n=e,"function"==typeof t.ref&&t.ref(e)},a=e=>{t.onFiles&&t.onFiles(e.target.files),r.value=n.value};return e.createComponent(i,{get class(){return t.class},onDrop:e=>{e.preventDefault(),e.stopPropagation(),t.onFiles&&t.onFiles(e.dataTransfer.files)},get children(){return[e.createComponent(d,{class:"flex-1",ref(e){"function"==typeof r?r(e):r=e},get placeholder(){return t.placeholder},onClick:()=>{n?.click()}}),(c=p(),c.addEventListener("change",a),e.use(s,c),c),e.createComponent(o,{get color(){return t.color},onClick:()=>{n?.click()},children:"..."})];var c}})},InputGroup:i,InputLabel:t=>{return r=h(),e.insert(r,(()=>t.children)),e.effect((()=>e.className(r,`form-control btn-${t.outline?"ol-":""}${t.color} ${t.class??""}`))),r;var r},InputText:d,RadioButtons:function(r){const n=r.buttons.findIndex((e=>e.value===r.initialValue)),[s,a]=t.createSignal(n);return e.createComponent(i,{get class(){return r.class},get children(){return e.createComponent(t.For,{get each(){return r.buttons},children:(t,n)=>e.createComponent(o,{get color(){return t.color},get outline(){return s()!==n()},get class(){return t.class},onClick:()=>(e=>{a(e),r.onChange?.(r.buttons[e].value)})(n()),get children(){return t.label}})})}})},Spinner:t=>{return r=m(),e.spread(r,e.mergeProps(t,{get class(){return`wh-1 spinner border-${t.color||"primary"} ${t.class||""}`}}),!1,!1),r;var r}});class f{constructor(e){this.transaction=e}getStore(e){return new v(this.transaction.objectStore(e))}}class v{constructor(e){this.store=e}async wrap(e){return new Promise(((t,r)=>{const n=e(this.store);n.onsuccess=()=>t(n.result),n.onerror=()=>r(n.error)}))}async add(e,t){return this.wrap((r=>r.add(e,t)))}async get(e){return this.wrap((t=>t.get(e)))}async getAll(){return this.wrap((e=>e.getAll()))}async getAllKeys(){return this.wrap((e=>e.getAllKeys()))}async getKey(e){return this.wrap((t=>t.getKey(e)))}async clear(){return this.wrap((e=>e.clear()))}async count(){return this.wrap((e=>e.count()))}async delete(e){return this.wrap((t=>t.delete(e)))}async put(e,t){return this.wrap((r=>r.put(e,t)))}async openCursor(e,t){return this.wrap((r=>r.openCursor(e,t)))}async openKeyCursor(e,t){return this.wrap((r=>r.openKeyCursor(e,t)))}index(e){return this.store.index(e)}createIndex(e,t,r){return this.store.createIndex(e,t,r)}deleteIndex(e){this.store.deleteIndex(e)}}const w=async(e,t)=>new Promise(((r,n)=>{let o=indexedDB.open(e);o.onsuccess=()=>r(o.result),o.onerror=()=>n(o.error),o.onupgradeneeded=e=>{t(e.target.result,e)}})),b=(e,t,r,n)=>new f(e.transaction(t,r,n));var x=Object.freeze({__proto__:null,AsyncIDBStore:v,AsyncIDBTransaction:f,createAsyncIDBTransaction:b,openIDBDatabase:w,openIDBStores:async(e,t,r,n)=>{const o=await w(e,(e=>{for(const r of t)e.createObjectStore(r)})),s=b(o,t,r,n);return t.map((e=>s.getStore(e)))}});const y=()=>navigator.clipboard;let S,C;if(void 0!==y()&&void 0!==y().readText&&void 0!==y().writeText)S=y().writeText,C=y().readText;else{let e="";S=t=>{e=t},C=async()=>e}const k=(e,t,r)=>{let n;return(r-=Math.floor(r))<.5?(n=t,r<1/6&&(n=e+6*(t-e)*r)):(n=e,r<2/3&&(n=e+(t-e)*(2/3-r)*6)),Math.round(255*n)},I=e=>Math.random().toString(36).slice(e),$=()=>I(7),T=()=>{const e=new Date;return Math.round(e.getTime()/1e3+60*e.getTimezoneOffset()).toString(36)},M=new Set([".",""]),D=(e,t)=>{const r=(t||[]).concat(e.split("/")),n=""===r[0];if(r.length<=1)return["."];const o=r.filter((e=>!M.has(e)));for(let e=0;e<o.length;e++)".."===o[e]&&(o.splice(e-1,2),e-=2);return n&&o.unshift(""),o},_=e=>e.join("/"),P=e=>{const t=D(e);return t[t.length-1]};var A=Object.freeze({__proto__:null,CURRENT_SEGMENTS:M,HSL2RGB:(e,t,r)=>{if(0===t)return[r,r,r];const n=r<.5?r*(1+t):r+t-r*t,o=2*r-n;return[k(o,n,e+1/3),k(o,n,e),k(o,n,e-1/3)]},PATH_SEPARATOR:"/",RGB2GRAY:(e,t,r)=>.299*e+.587*t+.114*r,RGB2HSL:(e,t,r)=>{e/=255,t/=255,r/=255;const n=Math.max(e,t,r),o=Math.min(e,t,r),s=n+o,a=n-o;if(n===o)return[0,0,n];const c=s>1?a/(2-2*s):a/s;switch(n){case e:return[((t-r)/a+(t<r?6:0))/6,c,s/2];case t:return[((r-e)/a+2)/6,c,s/2];default:return[((e-t)/a+4)/6,c,s/2]}},extractDirectory:e=>{const t=D(e);return _(t.slice(0,-1))},extractFileExtension:e=>{const t=P(e),r=t.lastIndexOf(".");return-1===r?"":t.slice(r+1)},extractFilename:P,genID:()=>`${T()}-${$()}`,hslStyle:(e,t,r)=>`hsl(${e}, ${100*t}%, ${100*r}%)`,incIndexToFilename:e=>{const t=D(e),r=P(e);let n=r.lastIndexOf(".");n<0&&(n=r.length);const o=r.slice(0,n),s=r.slice(n),a=o.match(/([0-9]+)([^0-9]*)$/);if(!a)return e;const c=parseInt(a[1])+1,l=o.slice(0,a.index)+c+a[2]+s;return t[t.length-1]=l,_(t)},isAbsolute:e=>""===e[0],joinPath:_,get loadString(){return C},longRandom:()=>I(2)+I(2),parsePath:D,get saveString(){return S},shortRandom:$,sleep:e=>new Promise((t=>setTimeout(t,e))),timeString:T,zeroed:(e,t)=>"0".repeat(t-e.length)+e});const[B,E]=r.createStore({nextID:0,modals:[],transitionMS:300}),j=e=>{const t=B.modals.find((t=>t.id===e));if(!t)return;clearTimeout(t.timeout);const r=t.callbacks.onClose;r&&!r()||(t.setShown(!1),t.timeout=window.setTimeout((()=>{t.callbacks.onUnmount?.(),E("modals",(t=>t.filter((t=>t.id!==e))))}),B.transitionMS))};var R=e.template("<div>");var F=Object.freeze({__proto__:null,ModalContainer:r=>{const n=t.mergeProps({hiddenClass:"hidden",shownClass:"shown",transitionMS:300},r),[o,s]=t.splitProps(n,["class","hiddenClass","shownClass","transitionMS"]);t.createEffect((()=>{(e=>{"number"==typeof e.transitionMS&&E("transitionMS",e.transitionMS)})(n)}));const a=e=>{e.target===e.currentTarget&&B.modals.length>0&&j(B.modals[B.modals.length-1].id)};return e.createComponent(t.Show,{get when(){return B.modals.length>0},get children(){var r=R();return e.spread(r,e.mergeProps(s,{get class(){return`modal-container ${o.class}`},onClick:a}),!1,!0),e.insert(r,e.createComponent(t.For,{get each(){return B.modals},children:t=>{return r=R(),e.insert(r,e.createComponent(e.Dynamic,e.mergeProps({get component(){return t.component},close:()=>j(B.modals[B.modals.length-1].id)},(()=>t.props)))),e.effect((()=>e.className(r,`modal-item ${t.shown()?o.shownClass:o.hiddenClass}`))),r;var r}})),r}})},closeModal:j,openModal:(e,r,n={})=>{const o=(()=>{const e=B.nextID.toString(36);return E("nextID",(e=>e+1)),e})(),[s,a]=t.createSignal(!1),c=window.setTimeout((()=>{n.onOpened?.()}),B.transitionMS),l={id:o,shown:s,setShown:a,timeout:c,component:e,props:r,callbacks:n};return E("modals",(e=>[...e,l])),setTimeout((()=>{n.onMount?.(),a(!0)})),o}});exports.block=g,exports.common=A,exports.idb=x,exports.modal=F;
//# sourceMappingURL=index.js.map
